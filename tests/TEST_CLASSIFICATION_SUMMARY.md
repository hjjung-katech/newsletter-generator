# ğŸ“Š Newsletter Generator í…ŒìŠ¤íŠ¸ ë¶„ë¥˜ ì²´ê³„ ìš”ì•½

## ğŸ¯ í…ŒìŠ¤íŠ¸ ë¶„ë¥˜ í˜„í™© (2025-05-26 ì—…ë°ì´íŠ¸)

Newsletter GeneratorëŠ” **GitHub Actions í˜¸í™˜ì„±**ì„ ê³ ë ¤í•œ ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ ë¶„ë¥˜ë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤.

### ğŸ—ï¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
tests/
â”œâ”€â”€ ğŸ“ api_tests/                    # ì‹¤ì œ API í˜¸ì¶œì´ í•„ìš”í•œ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_email_integration.py        # ğŸ†• Postmark API í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_compact_newsletter_api.py   # Compact ë‰´ìŠ¤ë ˆí„° API í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_serper_direct.py            # Serper API í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ ... (ê¸°íƒ€ API í…ŒìŠ¤íŠ¸ë“¤)
â”œâ”€â”€ ğŸ“ unit_tests/                   # ìˆœìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_template_manager.py         # í…œí”Œë¦¿ ê´€ë¦¬ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_date_utils.py               # ë‚ ì§œ ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ ... (ê¸°íƒ€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë“¤)
â”œâ”€â”€ ğŸ“„ test_email_delivery.py        # ğŸ†• ì´ë©”ì¼ ë°œì†¡ Mock/ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ ğŸ“„ test_unified_architecture.py  # í†µí•© ì•„í‚¤í…ì²˜ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ ğŸ“„ test_newsletter_mocked.py     # Mock ê¸°ë°˜ ë‰´ìŠ¤ë ˆí„° í…ŒìŠ¤íŠ¸
â””â”€â”€ ğŸ“„ conftest.py                   # í™˜ê²½ë³„ í…ŒìŠ¤íŠ¸ ì„¤ì •
```

### ğŸ·ï¸ Pytest ë§ˆì»¤ ë¶„ë¥˜

| ë§ˆì»¤ | ì„¤ëª… | GitHub Actions | API í‚¤ í•„ìš” | í• ë‹¹ëŸ‰ ì†Œëª¨ |
|------|------|----------------|-------------|-------------|
| `@pytest.mark.unit` | ìˆœìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | âœ… ì•ˆì „ | âŒ ë¶ˆí•„ìš” | âŒ ì—†ìŒ |
| `@pytest.mark.mock_api` | Mock API í…ŒìŠ¤íŠ¸ | âœ… ì•ˆì „ | âŒ ë¶ˆí•„ìš” | âŒ ì—†ìŒ |
| `@pytest.mark.real_api` | ì‹¤ì œ API í…ŒìŠ¤íŠ¸ | âŒ ìŠ¤í‚µ | âœ… í•„ìš” | âœ… ì†Œëª¨ |
| `@pytest.mark.integration` | í†µí•© í…ŒìŠ¤íŠ¸ | âŒ ìŠ¤í‚µ | âœ… í•„ìš” | âœ… ì†Œëª¨ |
| `@pytest.mark.api` | ë ˆê±°ì‹œ API í…ŒìŠ¤íŠ¸ | âŒ ìŠ¤í‚µ | âœ… í•„ìš” | âœ… ì†Œëª¨ |

### ğŸš€ í™˜ê²½ë³„ ì‹¤í–‰ ì „ëµ

| í™˜ê²½ | ëª©ì  | ì‹¤í–‰ ëŒ€ìƒ | ì˜ˆìƒ ì‹œê°„ | ì‚¬ìš© ì‚¬ë¡€ |
|------|------|-----------|-----------|-----------|
| **dev** | ê°œë°œìš© ë¹ ë¥¸ í”¼ë“œë°± | `unit` + `mock_api` | ~20ì´ˆ | ê°œë°œ ì¤‘ ë¹ ë¥¸ ê²€ì¦ |
| **ci** | CI/CDìš© ì „ì²´ ê²€ì¦ | ì „ì²´ (Real API ì œì™¸) | ~35ì´ˆ | GitHub Actions |
| **unit** | ìˆœìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | `unit`ë§Œ | ~21ì´ˆ | ê¸°ë³¸ ê¸°ëŠ¥ ê²€ì¦ |
| **integration** | ì‹¤ì œ í™˜ê²½ ê²€ì¦ | ëª¨ë“  í…ŒìŠ¤íŠ¸ | ìƒí™©ë³„ | ë°°í¬ ì „ ì™„ì „ ê²€ì¦ |

## ğŸ“§ ì´ë©”ì¼ í…ŒìŠ¤íŠ¸ ë¶„ë¥˜ (ì‹ ê·œ ì¶”ê°€)

### 1. ë‹¨ìœ„/Mock í…ŒìŠ¤íŠ¸ (`test_email_delivery.py`)
- **ìœ„ì¹˜**: `tests/` (ë©”ì¸ ë””ë ‰í† ë¦¬)
- **ë§ˆì»¤**: `@pytest.mark.unit`, `@pytest.mark.mock_api`
- **íŠ¹ì§•**: GitHub Actions ì•ˆì „, API í‚¤ ë¶ˆí•„ìš”
- **í…ŒìŠ¤íŠ¸ ë‚´ìš©**:
  - Postmark API í˜¸ì¶œ ëª¨í‚¹
  - ì´ë©”ì¼ ì„¤ì • ê²€ì¦
  - HTML í…œí”Œë¦¿ ì²˜ë¦¬
  - CLI ëª…ë ¹ì–´ í…ŒìŠ¤íŠ¸ (dry-run)

### 2. í†µí•© í…ŒìŠ¤íŠ¸ (`api_tests/test_email_integration.py`)
- **ìœ„ì¹˜**: `tests/api_tests/` (API í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬)
- **ë§ˆì»¤**: `@pytest.mark.integration`
- **íŠ¹ì§•**: ì‹¤ì œ Postmark API í˜¸ì¶œ, API í‚¤ í•„ìš”
- **í…ŒìŠ¤íŠ¸ ë‚´ìš©**:
  - ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡
  - Postmark ê³„ì • ìƒíƒœ í™•ì¸
  - ë‰´ìŠ¤ë ˆí„° íŒŒì¼ ê¸°ë°˜ ë°œì†¡

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜ ì œì–´

```bash
# GitHub Actions ì•ˆì „ ëª¨ë“œ (ê¸°ë³¸ê°’)
export RUN_REAL_API_TESTS=0
export RUN_MOCK_API_TESTS=1
export RUN_INTEGRATION_TESTS=0

# ì™„ì „ ê²€ì¦ ëª¨ë“œ (ë¡œì»¬ ê°œë°œìš©)
export RUN_REAL_API_TESTS=1
export RUN_MOCK_API_TESTS=1
export RUN_INTEGRATION_TESTS=1
```

## ğŸ“Š í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê²°ê³¼ ìš”ì•½

### âœ… GitHub Actions í˜¸í™˜ í…ŒìŠ¤íŠ¸
```bash
python run_tests.py ci
# ê²°ê³¼: 128 passed, 15 skipped (Real API ì œì™¸)
# ì‹œê°„: ~7ë¶„ (ëŒ€ë¶€ë¶„ LLM ëª¨í‚¹ ì‹œê°„)
```

### âœ… ì´ë©”ì¼ í…ŒìŠ¤íŠ¸ ë‹¨ë… ì‹¤í–‰
```bash
python -m pytest tests/test_email_delivery.py -v
# ê²°ê³¼: 11 passed, 1 skipped (Integration ì œì™¸)
# ì‹œê°„: ~2ì´ˆ
```

### âœ… ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
```bash
python run_tests.py unit
# ê²°ê³¼: 117 passed, 5 skipped
# ì‹œê°„: ~6ë¶„
```

## ğŸ¯ ê¶Œì¥ ì›Œí¬í”Œë¡œìš°

### ê°œë°œ ì¤‘
```bash
# ë¹ ë¥¸ ê²€ì¦ (Mock API + ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)
python run_tests.py dev
```

### PR ìƒì„± ì‹œ
```bash
# GitHub Actionsì—ì„œ ìë™ ì‹¤í–‰
python run_tests.py ci
```

### ë°°í¬ ì „
```bash
# ì‹¤ì œ API í¬í•¨ ì™„ì „ ê²€ì¦
python run_tests.py integration
```

### ì´ë©”ì¼ ê¸°ëŠ¥ ê°œë°œ ì‹œ
```bash
# ì´ë©”ì¼ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
python -m pytest tests/test_email_delivery.py -v

# ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ í…ŒìŠ¤íŠ¸ (API í‚¤ í•„ìš”)
python tests/api_tests/test_email_integration.py --to your-email@example.com
```

## ğŸ” ì£¼ìš” ê°œì„ ì‚¬í•­

1. **GitHub Actions í˜¸í™˜ì„± í™•ë³´**
   - API í‚¤ ì—†ì´ë„ ì‹¤í–‰ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ ë¶„ë¦¬
   - Mock ê¸°ë°˜ í…ŒìŠ¤íŠ¸ë¡œ ì™¸ë¶€ ì˜ì¡´ì„± ì œê±°

2. **ì´ë©”ì¼ í…ŒìŠ¤íŠ¸ ì²´ê³„í™”**
   - SendGrid â†’ Postmark ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì™€ í†µí•© í…ŒìŠ¤íŠ¸ ë¶„ë¦¬
   - CLI ëª…ë ¹ì–´ í…ŒìŠ¤íŠ¸ í¬í•¨

3. **í™˜ê²½ë³„ í…ŒìŠ¤íŠ¸ ì „ëµ**
   - ê°œë°œ íš¨ìœ¨ì„±ê³¼ í’ˆì§ˆ ë³´ì¦ ê· í˜•
   - API í• ë‹¹ëŸ‰ ì ˆì•½
   - ë¹ ë¥¸ í”¼ë“œë°± ë£¨í”„ êµ¬ì¶•

4. **í…ŒìŠ¤íŠ¸ ë¶„ë¥˜ ëª…í™•í™”**
   - Pytest ë§ˆì»¤ ì²´ê³„í™”
   - í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ ì¡°ê±´ë¶€ ì‹¤í–‰
   - ë ˆê±°ì‹œ í…ŒìŠ¤íŠ¸ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

---

**ğŸ‰ ê²°ë¡ **: Newsletter GeneratorëŠ” ì´ì œ GitHub Actionsì—ì„œ ì•ˆì „í•˜ê²Œ ì‹¤í–‰ë˜ë©´ì„œë„ ë¡œì»¬ì—ì„œëŠ” ì™„ì „í•œ ê²€ì¦ì´ ê°€ëŠ¥í•œ ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ êµ¬ì¡°ë¥¼ ê°–ì¶”ì—ˆìŠµë‹ˆë‹¤. 